(lambda f: (lambda words: print(sum(sum(sum((lambda f: lambda coordinates, direction, letters, matrix: 1 if len(letters) == 0 else (f(f)((coordinates[0]+direction[0], coordinates[1]+direction[1]), direction, letters[1:], matrix) if (0 <= coordinates[0]+direction[0] < len(matrix) and 0 <= coordinates[1]+direction[1] < len(matrix[0]) and matrix[coordinates[0]+direction[0]][coordinates[1]+direction[1]] == letters[0]) else 0))(lambda f: lambda coordinates, direction, letters, matrix: 1 if len(letters) == 0 else (f(f)((coordinates[0]+direction[0], coordinates[1]+direction[1]), direction, letters[1:], matrix) if (0 <= coordinates[0]+direction[0] < len(matrix) and 0 <= coordinates[1]+direction[1] < len(matrix[0]) and matrix[coordinates[0]+direction[0]][coordinates[1]+direction[1]] == letters[0]) else 0))((i, j), d, ['M', 'A', 'S'], words) for d in [(-1, -1), (-1, 0), (-1, 1), (0, 1), (1, 1), (1, 0), (1, -1), (0, -1)]) if words[i][j] == 'X' else 0 for j in range(0, len(words[0]))) for i in range(0, len(words)))))([line[:-1] for line in f]))(open("input.txt"))
